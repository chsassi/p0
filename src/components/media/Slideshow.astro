---
/**
 * Slideshow Component
 * Generic slideshow container for hero, artists, releases
 */
import SlideIndicators from './SlideIndicators.astro';

interface Props {
  id?: string;
  class?: string;
  slideCount: number;
  showNav?: boolean;
  showIndicators?: boolean;
  indicatorClass?: string;
}

const {
  id,
  class: className,
  slideCount,
  showNav = true,
  showIndicators = true,
  indicatorClass = 'indicator'
} = Astro.props;
---

<div id={id} class:list={['slideshow', className]}>
  <slot name="background" />

  <div class="slideshow-container">
    <slot />
  </div>

  {(showNav || showIndicators) && (
    <div class="slideshow-nav-wrapper">
      {showNav && (
        <button type="button" class="slideshow-nav-btn" data-dir="prev" aria-label="Previous slide">
          <img src="/images/icons/arrow-left.svg" alt="" class="nav-icon" />
        </button>
      )}

      {showIndicators && (
        <SlideIndicators
          count={slideCount}
          indicatorClass={indicatorClass}
        />
      )}

      {showNav && (
        <button type="button" class="slideshow-nav-btn" data-dir="next" aria-label="Next slide">
          <img src="/images/icons/arrow-right.svg" alt="" class="nav-icon" />
        </button>
      )}
    </div>
  )}
</div>

<style>
  .slideshow {
    position: relative;
    overflow: hidden;
  }

  .slideshow-container {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .slideshow-nav-wrapper {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 20px;
    z-index: 10;
  }

  .slideshow-nav-btn {
    background: transparent;
    border: none;
    box-shadow: none;
    backdrop-filter: none;
    width: auto;
    height: auto;
    padding: 8px;
    color: inherit;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.18s ease, opacity 0.18s ease;
    z-index: 10;
  }

  .slideshow-nav-btn:hover {
    transform: translateY(-2px);
    opacity: 0.95;
  }

  .nav-icon {
    width: 40px;
    height: 40px;
    display: block;
    background: transparent;
    filter: invert(1) grayscale(1) brightness(1);
  }

  @media (max-width: 768px) {
    .slideshow-nav-wrapper {
      bottom: 24px;
      gap: 12px;
    }

    .slideshow-nav-btn {
      padding: 6px;
    }

    .nav-icon {
      width: 22px;
      height: 22px;
    }
  }
</style>
